### ====================================================================
### 0) Observações gerais
###
### - Os IDs abaixo (clientes/contas) vêm dos seeds e comentários
###   em wallet/api/client.http e balances/api/client.http.
### - Certifique-se de subir tudo com:
###     docker compose up -d --build
### - Depois rode estes requests na ordem (VSCode REST Client, Insomnia, etc).
### ====================================================================


### 1) (Opcional) Criar novo cliente
### Não é necessário para o fluxo principal, pois já há clientes seedados,
### mas deixamos aqui um exemplo.
POST http://localhost:8080/clients
Content-Type: application/json

{
  "name": "Novo Cliente",
  "email": "novo.cliente@example.com"
}


### 2) (Opcional) Criar contas para clientes existentes
### IDs de clientes seedados (comentados em wallet/api/client.http):
### - Alice: d7c91b7e-2e1a-4f89-8bae-8c3f0f2a481a
### - Maria Souza: f81eaef6-c21a-4ea9-b6ce-b97a26af0ac8
###
### As contas abaixo provavelmente já existem via seed, mas este exemplo
### mostra como criá-las via API caso necessário.

POST http://localhost:8080/accounts
Content-Type: application/json

{
  "client_id": "f81eaef6-c21a-4ea9-b6ce-b97a26af0ac8"
}

###
POST http://localhost:8080/accounts
Content-Type: application/json

{
  "client_id": "d7c91b7e-2e1a-4f89-8bae-8c3f0f2a481a"
}


### 3) Cenário 1 - Alice e Maria Souza (contas já conhecidas)
### Contas (dos comentários em wallet/api/client.http):
### - Conta de Maria Souza: 17ca1194-28da-413a-8136-b4b700b6b13f
### - Conta de Alice:       0c4d1f7b-3b34-4461-9b21-76e58f7b6db8


### 3.1) Criar transação: Alice envia 50 para Maria
POST http://localhost:8080/transactions
Content-Type: application/json

{
  "account_id_from": "0c4d1f7b-3b34-4461-9b21-76e58f7b6db8",
  "account_id_to":   "17ca1194-28da-413a-8136-b4b700b6b13f",
  "amount": 50
}


### 3.2) Criar transação: Maria manda 25 de volta para Alice
POST http://localhost:8080/transactions
Content-Type: application/json

{
  "account_id_from": "17ca1194-28da-413a-8136-b4b700b6b13f",
  "account_id_to":   "0c4d1f7b-3b34-4461-9b21-76e58f7b6db8",
  "amount": 25
}


### 3.3) Consultar saldo da conta da Alice
### Serviço de balances (porta 3003)
GET http://localhost:3003/balances/0c4d1f7b-3b34-4461-9b21-76e58f7b6db8
Accept: application/json


### 3.4) Consultar saldo da conta da Maria Souza
GET http://localhost:3003/balances/17ca1194-28da-413a-8136-b4b700b6b13f
Accept: application/json



### 4) Cenário 2 - Contas usadas no seu teste manual
### Estes IDs vieram do seu próprio fluxo de teste:
### - account_id_from: 7e8c82a1-f330-4a51-9fde-8d0f5be6e9f1
### - account_id_to:   9ea3b57e-1b8e-4a1f-a453-2b013e1d7b8f
###
### Você já comprovou que:
### - POST /transactions com esses IDs gerou evento BalanceUpdated
### - GET /balances/{from} retornou balance = 900


### 4.1) Criar transação com o par de contas do teste manual
POST http://localhost:8080/transactions
Content-Type: application/json

{
  "account_id_from": "7e8c82a1-f330-4a51-9fde-8d0f5be6e9f1",
  "account_id_to":   "9ea3b57e-1b8e-4a1f-a453-2b013e1d7b8f",
  "amount": 100
}


### 4.2) Consultar saldo da conta de origem (deve refletir o novo balance)
GET http://localhost:3003/balances/7e8c82a1-f330-4a51-9fde-8d0f5be6e9f1
Accept: application/json

